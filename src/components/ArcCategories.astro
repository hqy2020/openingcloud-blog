---
/**
 * å¼§å½¢åˆ†ç±»å¡ç‰‡ â€” 4ä¸ªåˆ†ç±»æ²¿å¼§çº¿æ’åˆ—
 */
import { getCollection } from 'astro:content';

const collections = await Promise.all([
  getCollection('journal', ({ data }) => !data.draft),
  getCollection('tech', ({ data }) => !data.draft),
  getCollection('learning', ({ data }) => !data.draft),
  getCollection('life', ({ data }) => !data.draft),
]);

const categories = [
  { key: 'journal', label: 'æ—¥è®°', icon: 'ğŸ““', desc: 'æ—¥è®° & è®¡åˆ’å¤ç›˜', color: 'from-primary-100 to-primary-50 dark:from-primary-900/30 dark:to-primary-900/10', accent: 'text-primary-500', count: collections[0].length },
  { key: 'tech', label: 'æŠ€æœ¯', icon: 'ğŸ’»', desc: 'Java Â· AI Â· Agent', color: 'from-grass-100 to-grass-50 dark:from-grass-700/20 dark:to-grass-700/10', accent: 'text-grass-500', count: collections[1].length },
  { key: 'learning', label: 'å­¦ä¹ ', icon: 'ğŸ“š', desc: 'å­¦ä¹ æ–¹æ³• & è®¤çŸ¥', color: 'from-sun-100 to-sun-50 dark:from-sun-600/20 dark:to-sun-600/10', accent: 'text-sun-500', count: collections[2].length },
  { key: 'life', label: 'ç”Ÿæ´»', icon: 'ğŸ“·', desc: 'ç…§ç‰‡ & éšè®°', color: 'from-primary-100 to-primary-50 dark:from-primary-900/20 dark:to-primary-900/10', accent: 'text-primary-400', count: collections[3].length },
];
---

<section class="mb-10">
  <div class="flex justify-center">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 w-full max-w-3xl">
      {categories.map((cat, i) => (
        <a
          href={`/${cat.key}/`}
          class:list={[
            'group relative block rounded-2xl p-5 bg-gradient-to-br border border-white/60 dark:border-slate-700/40 shadow-soft hover:shadow-soft-md transition-all duration-300 hover:-translate-y-1 text-center',
            cat.color,
          ]}
          style={`transform: translateY(${Math.abs(i - 1.5) * 6}px);`}
          data-animate="fade-up"
        >
          <span class="text-3xl block mb-2">{cat.icon}</span>
          <h3 class:list={['font-bold text-lg', cat.accent]}>{cat.label}</h3>
          <p class="text-xs text-slate-500 dark:text-slate-400 mt-1">{cat.desc}</p>
          <span class="mt-2 inline-block text-xs bg-white/60 dark:bg-slate-800/60 rounded-full px-2 py-0.5 text-slate-500 dark:text-slate-400">{cat.count} ç¯‡</span>
        </a>
      ))}
    </div>
  </div>
</section>
