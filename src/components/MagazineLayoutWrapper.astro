---
/**
 * MagazineLayout Astro wrapper — 获取数据后传入 React 组件
 */
import { MagazineLayout } from '@/react/sections/MagazineLayout';

interface Props {
  posts: Array<{
    title: string;
    description?: string;
    date: Date;
    category: string;
    tags?: string[];
    cover?: string;
    slug: string;
  }>;
  title: string;
  subtitle?: string;
}

const { posts, title, subtitle } = Astro.props;

// Serialize Date objects to ISO strings for React
const serializedPosts = posts.map(post => ({
  ...post,
  date: post.date instanceof Date ? post.date.toISOString() : post.date,
}));
---

<MagazineLayout
  client:visible
  posts={serializedPosts}
  title={title}
  subtitle={subtitle}
/>
