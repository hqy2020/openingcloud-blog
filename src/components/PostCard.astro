---
/**
 * æ–‡ç« å¡ç‰‡ç»„ä»¶
 * å±•ç¤ºæ–‡ç« æ‘˜è¦ã€æ—¥æœŸã€æ ‡ç­¾
 */
interface Props {
  title: string;
  description?: string;
  date: Date;
  category: string;
  tags?: string[];
  cover?: string;
  slug: string;
}

const { title, description, date, category, tags = [], cover, slug } = Astro.props;

const categoryLabels: Record<string, string> = {
  journal: 'ğŸ““ æ—¥è®°',
  tech: 'ğŸ’» æŠ€æœ¯',
  learning: 'ğŸ“š å­¦ä¹ ',
  life: 'ğŸ“· ç”Ÿæ´»',
};

const formattedDate = new Date(date).toLocaleDateString('zh-CN', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<article class="group bg-white dark:bg-slate-800 rounded-xl shadow-sm hover:shadow-md border border-slate-200 dark:border-slate-700 transition-all duration-300 overflow-hidden">
  {cover && (
    <a href={`/posts/${slug}/`} class="block overflow-hidden">
      <img
        src={cover}
        alt={title}
        class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
        loading="lazy"
      />
    </a>
  )}
  <div class="p-5">
    <!-- åˆ†ç±»æ ‡ç­¾ -->
    <div class="flex items-center gap-2 mb-3">
      <a
        href={`/${category}/`}
        class="text-xs font-medium px-2.5 py-1 rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300 hover:bg-primary-200 dark:hover:bg-primary-900/50 transition-colors"
      >
        {categoryLabels[category] || category}
      </a>
      <time class="text-xs text-slate-400 dark:text-slate-500" datetime={date.toISOString()}>
        {formattedDate}
      </time>
    </div>

    <!-- æ ‡é¢˜ -->
    <h2 class="text-lg font-semibold mb-2">
      <a
        href={`/posts/${slug}/`}
        class="text-slate-800 dark:text-slate-100 hover:text-primary-500 dark:hover:text-primary-400 transition-colors line-clamp-2"
      >
        {title}
      </a>
    </h2>

    <!-- æè¿° -->
    {description && (
      <p class="text-sm text-slate-500 dark:text-slate-400 line-clamp-2 mb-3">
        {description}
      </p>
    )}

    <!-- æ ‡ç­¾ -->
    {tags.length > 0 && (
      <div class="flex flex-wrap gap-1.5">
        {tags.slice(0, 3).map(tag => (
          <a
            href={`/tags/${tag}/`}
            class="text-xs px-2 py-0.5 rounded-md bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400 hover:bg-primary-100 hover:text-primary-600 dark:hover:bg-primary-900/30 dark:hover:text-primary-300 transition-colors"
          >
            #{tag}
          </a>
        ))}
      </div>
    )}
  </div>
</article>
