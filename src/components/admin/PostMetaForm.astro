---
// PostMetaForm.astro — 文章元数据表单（标题、slug、分类、标签、封面、描述）
interface Props {
  post?: {
    title?: string;
    slug?: string;
    description?: string;
    category?: string;
    tags?: string;
    cover?: string;
  };
}

const { post } = Astro.props;
const tags = post?.tags ? JSON.parse(post.tags) : [];
---

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
  <div>
    <label for="post-title" class="block text-sm font-medium mb-1">标题 *</label>
    <input
      type="text"
      id="post-title"
      name="title"
      required
      value={post?.title || ''}
      class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none focus:ring-2 focus:ring-primary-500"
      placeholder="文章标题"
    />
  </div>
  <div>
    <label for="post-slug" class="block text-sm font-medium mb-1">Slug *</label>
    <input
      type="text"
      id="post-slug"
      name="slug"
      required
      value={post?.slug || ''}
      class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none focus:ring-2 focus:ring-primary-500"
      placeholder="url-friendly-slug"
    />
  </div>
  <div>
    <label for="post-category" class="block text-sm font-medium mb-1">分类 *</label>
    <select
      id="post-category"
      name="category"
      required
      class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none focus:ring-2 focus:ring-primary-500"
    >
      <option value="tech" selected={post?.category === 'tech'}>技术</option>
      <option value="learning" selected={post?.category === 'learning'}>学习</option>
      <option value="journal" selected={post?.category === 'journal'}>日记</option>
      <option value="life" selected={post?.category === 'life'}>生活</option>
    </select>
  </div>
  <div>
    <label for="post-tags" class="block text-sm font-medium mb-1">标签</label>
    <input
      type="text"
      id="post-tags"
      name="tags"
      value={tags.join(', ')}
      class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none focus:ring-2 focus:ring-primary-500"
      placeholder="用逗号分隔，如: JavaScript, Astro"
    />
  </div>
  <div>
    <label for="post-cover" class="block text-sm font-medium mb-1">封面图</label>
    <input
      type="text"
      id="post-cover"
      name="cover"
      value={post?.cover || ''}
      class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none focus:ring-2 focus:ring-primary-500"
      placeholder="封面图片 URL"
    />
  </div>
  <div>
    <label for="post-description" class="block text-sm font-medium mb-1">描述</label>
    <input
      type="text"
      id="post-description"
      name="description"
      value={post?.description || ''}
      class="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none focus:ring-2 focus:ring-primary-500"
      placeholder="文章简介"
    />
  </div>
</div>
