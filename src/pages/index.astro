---
/**
 * é¦–é¡µ â€” åˆ†ç±»å¯¼èˆª + æœ€æ–°æ–‡ç« 
 */
import BaseLayout from '@/layouts/BaseLayout.astro';
import CategoryNav from '@/components/CategoryNav.astro';
import PostCard from '@/components/PostCard.astro';
import { getCollection } from 'astro:content';

const allCollections = await Promise.all([
  getCollection('journal', ({ data }) => !data.draft),
  getCollection('tech', ({ data }) => !data.draft),
  getCollection('learning', ({ data }) => !data.draft),
  getCollection('life', ({ data }) => !data.draft),
]);

const allPosts = allCollections.flat()
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 10);
---

<BaseLayout title="é¦–é¡µ">
  <!-- Hero -->
  <div class="mb-8 p-6 rounded-xl bg-gradient-to-r from-primary-500/10 to-primary-300/10 dark:from-primary-900/20 dark:to-primary-700/10 border border-primary-200/50 dark:border-primary-800/30">
    <h1 class="text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2">
      â˜ï¸ å¯äº‘çš„åšå®¢
    </h1>
    <p class="text-slate-500 dark:text-slate-400">
      æŠ€æœ¯ Â· å­¦ä¹  Â· ç”Ÿæ´» â€” è®°å½•æˆé•¿çš„æ¯ä¸€æ­¥
    </p>
  </div>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <section class="mb-8">
    <CategoryNav />
  </section>

  <!-- æœ€æ–°æ–‡ç«  -->
  <section>
    <h2 class="text-xl font-bold text-slate-800 dark:text-slate-100 mb-4">ğŸ“ æœ€æ–°æ–‡ç« </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {allPosts.map(post => (
        <PostCard
          title={post.data.title}
          description={post.data.description}
          date={post.data.date}
          category={post.data.category}
          tags={post.data.tags}
          cover={post.data.cover}
          slug={post.id}
        />
      ))}
    </div>
  </section>
</BaseLayout>
