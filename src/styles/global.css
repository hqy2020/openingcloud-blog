@import 'tailwindcss';
@plugin '@tailwindcss/typography';
@custom-variant dark (&:where(.dark, .dark *));

/* 云上牧场日记 — 设计系统 */
@theme {
  /* 天空蓝 — 主色（替换原紫色 primary） */
  --color-primary-50:  #F0F7FF;
  --color-primary-100: #E0EFFF;
  --color-primary-200: #BAD9FF;
  --color-primary-300: #8EC9FF;
  --color-primary-400: #5CB0FF;
  --color-primary-500: #3A9AFF;
  --color-primary-600: #1A7AE6;
  --color-primary-700: #0F5FBF;
  --color-primary-800: #0A4599;
  --color-primary-900: #062D73;

  /* 语义别名 — 对齐设计文档 token */
  --color-sky-400: #8EC9FF;
  --color-cloud-50: #F8FBFF;

  /* 草地绿 — 分类/标签 */
  --color-grass-50:  #F0F7F0;
  --color-grass-100: #DCF0DC;
  --color-grass-200: #B5DEB5;
  --color-grass-300: #8ECC8E;
  --color-grass-400: #7AA874;
  --color-grass-500: #5E8E58;
  --color-grass-600: #4A7346;
  --color-grass-700: #375A35;

  /* 暖调橙 — CTA/高亮 */
  --color-sun-50:  #FFF8F0;
  --color-sun-100: #FFECD4;
  --color-sun-200: #FFD9A8;
  --color-sun-300: #FFB86B;
  --color-sun-400: #FF9F3A;
  --color-sun-500: #E6850F;
  --color-sun-600: #BF6B0A;

  /* 背景色 */
  --color-bg-light:   #F8FBFF;
  --color-bg-dark:    #0f172a;
  --color-card-light: #FFFFFF;
  --color-card-dark:  #1e293b;
  --color-text-light: #1e293b;
  --color-text-dark:  #e2e8f0;

  /* 字体 */
  --font-sans: 'PingFang SC', 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-display: 'LXGW WenKai', 'PingFang SC', cursive;
  --font-mono: 'JetBrains Mono', 'Fira Code', ui-monospace, SFMono-Regular, monospace;

  /* 柔和阴影 */
  --shadow-soft: 0 2px 15px -3px rgba(0, 0, 0, 0.06), 0 2px 6px -4px rgba(0, 0, 0, 0.04);
  --shadow-soft-md: 0 4px 25px -5px rgba(0, 0, 0, 0.08), 0 4px 10px -6px rgba(0, 0, 0, 0.04);
  --shadow-glow: 0 0 20px rgba(58, 154, 255, 0.15);
  --shadow-glow-lg: 0 0 40px rgba(58, 154, 255, 0.2);

  /* Glow 颜色 */
  --color-glow-blue: rgba(58, 154, 255, 0.15);
  --color-glow-purple: rgba(139, 92, 246, 0.15);

  /* Bento 间距 */
  --spacing-bento: 1.25rem;

  /* 缓动函数 */
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
}

/* 基础样式 */
html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-sans);
  background-color: var(--color-bg-light);
  color: var(--color-text-light);
  transition: background-color 0.3s, color 0.3s;
}

/* 纸质纹理 overlay */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

.dark body {
  background-color: var(--color-bg-dark);
  color: var(--color-text-dark);
}

/* 标题字体 — 霞鹜文楷 */
h1, h2, h3 {
  font-family: var(--font-display);
}

/* 文章内容样式 */
.prose h1, .prose h2, .prose h3 {
  color: var(--color-text-light);
  font-weight: 700;
  font-family: var(--font-display);
}

.dark .prose h1, .dark .prose h2, .dark .prose h3 {
  color: var(--color-text-dark);
}

.prose a {
  color: var(--color-primary-500);
  text-decoration: underline;
  text-underline-offset: 3px;
}

.prose a:hover {
  color: var(--color-primary-600);
}

.prose code {
  background-color: #f1f5f9;
  padding: 0.15rem 0.4rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
  font-family: var(--font-mono);
}

.dark .prose code {
  background-color: #334155;
}

.prose pre {
  border-radius: 0.5rem;
  padding: 1.25rem;
}

.prose img {
  border-radius: 0.5rem;
  margin: 1.5rem auto;
}

/* 滚动条 — 天空蓝 */
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: var(--color-primary-300);
  border-radius: 3px;
}
.dark ::-webkit-scrollbar-thumb {
  background: var(--color-primary-700);
}

/* 滚动渐入动效 (IntersectionObserver fallback) */
[data-animate="fade-up"] {
  opacity: 0;
  transform: translateY(16px);
  transition: opacity 0.5s ease, transform 0.5s ease;
}

[data-animate="fade-up"].is-visible {
  opacity: 1;
  transform: translateY(0);
}

@media (prefers-reduced-motion: reduce) {
  [data-animate="fade-up"] {
    opacity: 1;
    transform: none;
    transition: none;
  }
}

/* 编辑式大标题 */
.text-editorial-xl {
  font-family: var(--font-display);
  font-size: clamp(2rem, 5vw, 3.5rem);
  font-weight: 800;
  line-height: 1.1;
  letter-spacing: -0.02em;
}

/* 滚动渐变背景 */
.scroll-gradient-bg {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background: linear-gradient(
    180deg,
    var(--color-bg-light) 0%,
    var(--color-primary-50) 40%,
    var(--color-bg-light) 100%
  );
  background-size: 100% 200%;
  transition: background-position 0.3s ease;
}
.dark .scroll-gradient-bg {
  background: linear-gradient(
    180deg,
    var(--color-bg-dark) 0%,
    #0c1729 40%,
    var(--color-bg-dark) 100%
  );
  background-size: 100% 200%;
}

/* 阅读进度条 */
.reading-progress {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
  z-index: 100;
  background: linear-gradient(90deg, var(--color-primary-400), var(--color-primary-600));
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.1s linear;
}

/* View Transition keyframes */
@keyframes slide-in-from-right {
  from { transform: translateX(30px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slide-out-to-left {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(-30px); opacity: 0; }
}

/* View Transition 自定义动画 */
@view-transition {
  navigation: auto;
}

::view-transition-old(root) {
  animation: slide-out-to-left 0.25s var(--ease-out-expo) both;
}

::view-transition-new(root) {
  animation: slide-in-from-right 0.25s var(--ease-out-expo) both;
}
